---
layout: post
title: "Java Project 01 - DC KeyWord Alarm"
date: 2019-06-09
excerpt: "Java Project 01"
tags: [Java, keyword, taeboranger, DCinside]
comments: true
---

## Java Personal Project 01

#DC Keyword Alarm Program

<figure class="half">
<img src="data:image/png;base64,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"
</figure>

<figure class="half">
    <img src="https://lh3.googleusercontent.com/EpCEWAIyfYl_ScxyValGt9va0ZYRL63L0ny6PJUqlNRtdjA-98ariOFHS4Jp-NOMO10">
</figure>

### Why?

DC Inside, which is one of Korea's largest community sites, doesn't support the keyword alarm system. So, I had to keep press F5 to check the new issue. I couldn't take this anymore. That's why I decided to make this app.

### than, How?

Actually, it's my first time to make my own java project. So I had to think for a solution for a while. Let me think about it..... **The HTML** Html, it's the key idea of this project. Using java.net class, especially URLconnection, we can connect to websites and parse it's html code. Next, we should analyze it's html code.

##### HTML Code analyze

<figure>
    <img src="https://user-images.githubusercontent.com/51315771/59735819-2844f880-9292-11e9-8626-fe520c8c3572.JPG">
</figure>
This is how notification posts look like. It is written in bold.

<figure>
    <img src="https://user-images.githubusercontent.com/51315771/59735817-2844f880-9292-11e9-9be9-b59713b1dce9.JPG">
</figure>
This is how ordinary posts look like.

So let's check their html code.

<figure>
    <img src="https://user-images.githubusercontent.com/51315771/59735820-28dd8f00-9292-11e9-8fa0-76dc9682c204.JPG">
</figure>

<figure>
    <img src="https://user-images.githubusercontent.com/51315771/59735818-2844f880-9292-11e9-8d58-c0c9c62a6102.JPG">
</figure>

So what's the difference between them?

`<a href="/mgallery/board/view/?id=moonbanggu&no=1260&page=1"><em class="icon_img icon_notice"></em><b>문방구 갤러리는 정식갤러리 승격을 거부합니다.</b></a>`

`<a href="/mgallery/board/view/?id=moonbanggu&no=11393&page=1"><em class="icon_img icon_pic"></em>마지막 시험 요점정리</a>`

There is `<b>` and `</b>` before and after the title text.
So ordinary post's title should contain `<a href="/mgallery/board/view/?id=` and should not contain `<b>` and `</b>`.

So the prepare is done.

**Let's get it**

### The Code

Let's check the entire code first.

<details>
<summary>Entire Code</summary>
<div markdown="1">

```

package keyword_alarm;

import java.awt.*;
import java.awt.event.*;
import java.io.*;
import java.net.URL;
import java.net.URLConnection;

import javax.swing.*;

import java.util.ArrayList;



public class keyword {

    /**
     * @param args
     */
	//688

	static JFrame f;
	static JPanel p,p_up,p_down,p_right,p_left,p_center;
	static JLabel l_link, l_keyword, l_duration;
	static JTextArea t_link,t_keyword,t_keywordList,t_duration,t_result;
	static JButton b_add, b_act, b_stop, b_clear;
	static JOptionPane m1;
	static long time = 0;
	static ArrayList<String> kew = new ArrayList<String>();
	static task task = new task();
	static File keyList = new File("keyList.txt");
    static File newList = new File("newList.txt");
	static FileWriter nlwriter;
	static FileWriter klwriter;
	static FileWriter klwriter_ap;
    public static void main(String[] args) throws IOException {
        // TODO Auto-generated method stub

    	Runtime.getRuntime().addShutdownHook(new Thread() {
            public void run() {
            	try {
					nlwriter.close();
					klwriter_ap.close();
					klwriter.close();
				} catch (IOException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
            }

        });

    	String location = System.getProperty("user.dir");

    	nlwriter = new FileWriter(newList, true);
    	klwriter_ap = new FileWriter(keyList, true);

    	if(keyList.exists()==false&&newList.exists()==false) {
    		keyList.createNewFile();
    		newList.createNewFile();
    	}

        f= new JFrame("DC인사이드 키워드 알람 프로그램");
		p = new JPanel();
		p_up = new JPanel();
		p_down = new JPanel();
		p_right = new JPanel();
		p_left = new JPanel();
		p_center = new JPanel();

		p.setLayout(new BorderLayout());
		p.add(BorderLayout.NORTH,p_up);
		p.add(BorderLayout.SOUTH,p_down);
		p.add(BorderLayout.EAST,p_right);
		p.add(BorderLayout.WEST,p_left);
		p.add(BorderLayout.CENTER,p_center);

		l_link = new JLabel(" Link : ");
		t_link = new JTextArea("https://gall.dcinside.com/mgallery/board/lists?id=",1,1);
		l_keyword = new JLabel(" Keyword : ");
		t_keyword = new JTextArea("Keyword Here",1,1);
		b_add = new JButton("Add");
		t_keywordList = new JTextArea("Keyword List",50,20);
		t_keywordList.setEditable(false);
		b_add.setToolTipText("입력한 키워드를 추가합니다");
		t_keywordList.setToolTipText("키워드 목록");

		b_act = new JButton("Act");
		b_stop = new JButton("Stop");
		b_clear = new JButton("Clear");
		b_clear.setToolTipText("키워드 목록을 초기화합니다");
		l_duration = new JLabel("Check Duration");
		t_duration = new JTextArea("5000",1,1);
		t_duration.setToolTipText("1000 = 1초, 서버 과부하를 막기위해 3초가 최솟값입니다");
		t_result = new JTextArea("Result\r\n",50,50);
		t_result.setEditable(false);

		time = Long.valueOf(t_duration.getText()).longValue();
		time = Long.parseLong(t_duration.getText());

		task.start();
		task.suspend();

		ActionListener al_add = new ActionListener() {

			@Override
			public void actionPerformed(ActionEvent arg0) {
				// TODO Auto-generated method stub
				kew.add(t_keyword.getText());
				try {
					klwriter_ap.write(t_keyword.getText());
					klwriter_ap.write("\n");
				} catch (IOException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}

				t_keywordList.append("\r\n" + t_keyword.getText());
			}
		};

		ActionListener al_act = new ActionListener() {

			@Override
			public void actionPerformed(ActionEvent e) {
				// TODO Auto-generated method stub
				time = Long.valueOf(t_duration.getText()).longValue();
				time = Long.parseLong(t_duration.getText());
				task.resume();
			}
		};

		ActionListener al_stop = new ActionListener() {

			@Override
			public void actionPerformed(ActionEvent e) {
				// TODO Auto-generated method stub
				task.suspend();
			}		
		};

		ActionListener al_clear = new ActionListener() {

			@Override
			public void actionPerformed(ActionEvent arg0) {
				// TODO Auto-generated method stub
				kew.clear();
				try {
					klwriter_ap = new FileWriter(keyList);
				} catch (IOException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
				t_keywordList.setText("Keyword List");

			}
		};

		b_add.addActionListener(al_add);
		b_act.addActionListener(al_act);
		b_stop.addActionListener(al_stop);
		b_clear.addActionListener(al_clear);

		f.add(p);
		p_up.add(l_link);
		p_up.add(t_link);
		p_up.add(l_keyword);
		p_up.add(t_keyword);
		p_up.add(b_add);
		p_center.add(t_keywordList);
		p_down.add(b_clear);
		p_down.add(b_act);
		p_down.add(b_stop);
		p_up.add(l_duration);
		p_up.add(t_duration);
		p_center.add(t_result);

		f.pack();
		f.setVisible(true);
		f.setSize(1000, 1000);

    }

}

package keyword_alarm;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.URL;
import java.net.URLConnection;
import java.util.ArrayList;

import javax.swing.JButton;
import javax.swing.JOptionPane;

public class task extends Thread{

	String urlPath = "";
	String pageContents = "";
	String result = "";
	StringBuilder contents = new StringBuilder();
	int a=0, ln=0,c=0, number = 0;
	long time = 0;
	JButton[] buttons = new JButton[100];

	ArrayList<String> keword = new ArrayList<String>();
	int temp=0;

	public void run() {
		//크롤링 코드


		while(true)
		{
			try
			{
				urlPath = keyword.t_link.getText();
	            URL url = new URL(urlPath);
	            URLConnection con = (URLConnection)url.openConnection();
	            InputStreamReader reader = new InputStreamReader (con.getInputStream(), "utf-8");

	            BufferedReader buff = new BufferedReader(reader);

	            while((pageContents = buff.readLine())!=null)
	            {
	            	//System.out.println(pageContents);

	            	int start = pageContents.indexOf("</em>");
	            	int end = pageContents.indexOf("</a>");
	            	//String result = sample.substring(index1+1, indexEnd);
	 		        if(pageContents.contains("<a href=\"/mgallery/board/view/?id=")&&pageContents.contains("</b>")==false)
	 		        {
	 		        	for(int i = 0; i < keyword.kew.size(); i++)
	 		        	{
	 		        		if(pageContents.contains(keyword.kew.get(i)))
	 		        		{
	 		        			result = result + pageContents.substring(start+5,end)+"\r\n";
	 		        			try
	 		        			{
	 		   					keyword.nlwriter.write(pageContents.substring(start+5,end));
	 		   				}
	 		        			catch (IOException e)
	 		        			{
	 		   					// TODO Auto-generated catch block
	 		   					e.printStackTrace();
	 		   				}
	 		        			a++;
	 		        		}
	 		        	}
	 		        }
	            }
	            buff.close();

	            if("Result\r\n" + result != keyword.t_result.getText())
	            {
	            	keyword.t_result.setText("Result\r\n");
	            	keyword.t_result.append(result);
	            	result = "";
	            }

	            if(temp < a) keyword.m1.showMessageDialog(null, "제목에 키워드를 포함한 새로운 글이 올라왔습니다","DC 키워드 알리미",JOptionPane.PLAIN_MESSAGE);
	            temp = a;

	            a=0;

	            if(keyword.time<3000) Thread.sleep(3000);
	            else Thread.sleep(keyword.time);

	        }
			catch(Exception e)
			{
	            e.printStackTrace();
	        }
		}
	}
}

</div>
</details>

```
</div>
</details>

<figure>
<img src = "https://user-images.githubusercontent.com/51315771/59740749-fb014600-92a3-11e9-9aa3-b3210dbd8dbb.png">
</figure>

This is it's GUI.
Just type link and keyword in the appropriate textbox, set the duration(mills) and add them.
Start/Pause it by `Act` and `Stop`. Clear the box by `Clear`.

[App Download Link](https://drive.google.com/open?id=1SjDyO6nhvholiSieIEO4S5sqcV-thEqH)

Thanks
